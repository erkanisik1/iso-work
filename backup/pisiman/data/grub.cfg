set default="1"

function load_video {
  insmod efi_gop
  insmod efi_uga
  insmod video_bochs
  insmod video_cirrus
  insmod all_video
}

load_video
set gfxpayload=keep
insmod gzio
insmod part_gpt
insmod ext2

set timeout=60

search --set=root --file /.miso

submenu "English" {
    terminal_input at_keyboard

    set menu_color_normal=white/black
    set menu_color_highlight=white/blue

    keymap /EFI/boot/en.gkb
    set lang=en
    menuentry "PisiLinux 2.3 UEFI - GPT Installing" {
        load_video
        linux /EFI/pisi/kernel.efi options misobasedir=pisi misolabel=pisilive overlay=free quiet ---
        initrd /EFI/pisi/initrd.img
    }
    menuentry "PisiLinux 2.3 AMD UEFI - GPT Installing" {
        load_video
        linux /EFI/pisi/kernel.efi options misobasedir=pisi misolabel=pisilive overlay=free kms quiet amdgpu.vm_fragment_size=9 acpi=no iommu=pt pci=noaer rcu_nocbs=0-7 ivrs_ioapic[4]=00:14.0 ivrs_ioapic[5]=00:00.2 idle=nomwait psmouse.proto=imps quiet ---
        initrd /EFI/pisi/initrd.img
    }

    menuentry "Restart" {
        reboot
    }

    menuentry "Start Firmware" {
        fwsetup
    }
}
